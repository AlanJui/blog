---
layout: post
title: 如何啟用 XAMPP 中的 SMTP Server 功能
date: '2011-03-24T18:42:00.001+08:00'
author: 居正中
tags:
- 知識
modified_time: '2013-05-07T10:58:46.868+08:00'
thumbnail: http://lh6.ggpht.com/_40BYSx3mIfk/TYsfvnR8ATI/AAAAAAAABEg/OUw2MaCZYMk/s72-c/SNAGHTML123213b_thumb.png?imgmax=800
blogger_id: tag:blogger.com,1999:blog-1068034375721560223.post-8929882770772675052
blogger_orig_url: http://blog.ccc99.tw/2011/03/xamppsmtp.html
---

現在的Web應用系統，經常需要有透過e-mail發通知的功能。<br /><br />可在Windows作業系統環境執行的XAMPP套件，其中的Mercury/32 (以下簡稱：Mercury)，就具有SMTP Server的功能。透過這個子套件，我們就可以在程式中，使用SMTP來發送e-mail。<br /><br />只是.......，Mercury的使用，可沒像XAMPP中的Apache或MySQL一樣的簡單，只需輕輕鬆鬆按個 ［Start］鈕，就能將功能啟動。<br /><br />為了搞定Ｍercury的設定，可真是快把我搞瘋。今天，我的 Lucky Day 總算到來了，所以，借著好運之助，我Google到一篇文章，參考其中的作法，再加上自己的測試與摸索，終於…..，把這個我「孝想」已久的功能給安裝妥當。<br />整個安裝設定的主要程序如下：<br /><ol><li>啟動Mercury功能  </li><li>設定Core Module組態 </li><li>設定MercuryS SMTP Server組態  </li><li>設定MercuryE SMTP Client組態  </li><li>設定PHP.INI組態 </li><li>重新啟動Ｍercury與Apache功能</li></ol>對於各個程序的執行步驟，說明如下：<br /><h3>啟動Mecury功能</h3>1. 自 "XAMPP Control Panel Application” 啟動Ｍercury。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsfu1LH_9I/AAAAAAAABEc/X-T78iNf2OA/s1600-h/SNAGHTML123213b%5B3%5D.png"><img alt="SNAGHTML123213b" border="0" height="196" src="http://lh6.ggpht.com/_40BYSx3mIfk/TYsfvnR8ATI/AAAAAAAABEg/OUw2MaCZYMk/SNAGHTML123213b_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML123213b" width="244" /></a> </blockquote>2. 系統啟動Mercury。<br /><blockquote><a href="http://lh3.ggpht.com/_40BYSx3mIfk/TYsfwUf2kDI/AAAAAAAABEk/X3BkCstBIUE/s1600-h/SNAGHTML12487f9%5B3%5D.png"><img alt="SNAGHTML12487f9" border="0" height="196" src="http://lh3.ggpht.com/_40BYSx3mIfk/TYsfxMtHjdI/AAAAAAAABEo/N-YL0OyhEDc/SNAGHTML12487f9_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML12487f9" width="244" /></a> </blockquote>3. 點選［Admin］鈕，啟動［Mercury/32］的管理軟體。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsfx65fiDI/AAAAAAAABEs/F3ft5kZ8tWA/s1600-h/SNAGHTML126a2aa%5B3%5D.png"><img alt="SNAGHTML126a2aa" border="0" height="196" src="http://lh6.ggpht.com/_40BYSx3mIfk/TYsfyZFhhGI/AAAAAAAABEw/Z0Uz_lHK6Eo/SNAGHTML126a2aa_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML126a2aa" width="244" /></a> </blockquote>4. Windows出現［Mercury/32］管理介面的畫面。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsfzTXFE4I/AAAAAAAABE0/LT1v6G0-U_w/s1600-h/SNAGHTML128d34b%5B3%5D.png"><img alt="SNAGHTML128d34b" border="0" height="181" src="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf0GfN2dI/AAAAAAAABE4/ueLZ8_nnMK8/SNAGHTML128d34b_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML128d34b" width="244" /></a> </blockquote><h3>設定Core Module</h3>1. 自［Configuration］功能表，選擇［Ｍercury core module］指令。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsf0ttQhhI/AAAAAAAABE8/xKTNaNbtSG8/s1600-h/SNAGHTML12b1dc2%5B3%5D.png"><img alt="SNAGHTML12b1dc2" border="0" height="221" src="http://lh3.ggpht.com/_40BYSx3mIfk/TYsf1qqha3I/AAAAAAAABFA/foGAMf9NSzI/SNAGHTML12b1dc2_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML12b1dc2" width="244" /></a> </blockquote>2. 在［Mercury Core Module Configuration］的對話方塊，預設的［General］活頁籤，完成下列項目設定：<br /><ul><li>在［Internet name for this system］欄位，填 <strong><span style="color: red;">”localhost”</span></strong>  </li><li>只勾選［Send copies of all errors to the postmaster］設定</li></ul><blockquote><a href="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf2BN18DI/AAAAAAAABFE/t0kuy3HvSeg/s1600-h/SNAGHTML12cae9c%5B3%5D.png"><img alt="SNAGHTML12cae9c" border="0" height="244" src="http://lh6.ggpht.com/_40BYSx3mIfk/TYsf28AbwyI/AAAAAAAABFI/JL2NYySdadg/SNAGHTML12cae9c_thumb.png?imgmax=800" style="background-image: none; border-bottom-width: 0px; border-left-width: 0px; border-right-width: 0px; border-top-width: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML12cae9c" width="216" /></a></blockquote>3. 在［Local domains］活頁籤，確定有如下標紅框處之localhost設定：<br /><blockquote><a href="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf3purYYI/AAAAAAAABFM/ko9OqYBgQK4/s1600-h/SNAGHTML135232f%5B3%5D.png"><img alt="SNAGHTML135232f" border="0" height="244" src="http://lh3.ggpht.com/_40BYSx3mIfk/TYsf4bWmPlI/AAAAAAAABFQ/10tQR6gFKzw/SNAGHTML135232f_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML135232f" width="216" /></a></blockquote>4. 按［確定］鈕，儲存設定值，並關閉［Mercury Core Module Configuration］對話方塊。<br /><h3>設定MercuryS SMTP Server</h3>1. 自［Configuration］功能表，選擇［Ｍercury core module］指令。<br /><blockquote><a href="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf5bYg6OI/AAAAAAAABFU/1sb9h5WYAHI/s1600-h/SNAGHTML13a8b63%5B3%5D.png"><img alt="SNAGHTML13a8b63" border="0" height="244" src="http://lh4.ggpht.com/_40BYSx3mIfk/TYsf6XYPesI/AAAAAAAABFY/Xd2RxkqOwT8/SNAGHTML13a8b63_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML13a8b63" width="209" /></a></blockquote>2. 在［Mercury SMTP Server］的對話方塊，預設的［General］活頁籤，完成下列項目設定：<br /><ul><li>在［Announce myself as］欄位，填 <strong><span style="color: red;">“SMTP”</span></strong>  </li><li>在［IP Interface to use］欄位，填 <strong><span style="color: red;">“127.0.0.1”</span></strong>&nbsp; (因為我有其它的考量，所以我在此欄填了一個Private IP)</li></ul><blockquote><a href="http://lh4.ggpht.com/_40BYSx3mIfk/TYsf7OX4fVI/AAAAAAAABFc/l8WY0KH29wE/s1600-h/SNAGHTML1455547%5B3%5D.png"><img alt="SNAGHTML1455547" border="0" height="244" src="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf7luHiBI/AAAAAAAABFg/wP2X5hfrDhY/SNAGHTML1455547_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML1455547" width="190" /></a></blockquote>3. 點選［Connection control］活頁籤，看到如下畫面：<br /><blockquote><a href="http://lh4.ggpht.com/_40BYSx3mIfk/TYsf8WHbziI/AAAAAAAABFk/exl5pNcKTh4/s1600-h/SNAGHTML1486c11%5B3%5D.png"><img alt="SNAGHTML1486c11" border="0" height="244" src="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf9ERlD6I/AAAAAAAABFo/lC52r29BbVE/SNAGHTML1486c11_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML1486c11" width="190" /></a></blockquote>4. 按［Add restriction］鈕，準備設定IP: 127.0.0.1為SMTP Server會提供服務的IP網址。<br />5. 在［IP Address reang］的［from］及［to］欄位填入 “127.0.0.1” ；確認［Attributes for this entry］的選項，設定為［Allow connections］；最後按［OK］鈕，結束此設定動作。<br /><blockquote><a href="http://lh4.ggpht.com/_40BYSx3mIfk/TYsf9xzxclI/AAAAAAAABFs/B0IPPeuzFow/s1600-h/SNAGHTML14e57a7%5B3%5D.png"><img alt="SNAGHTML14e57a7" border="0" height="197" src="http://lh5.ggpht.com/_40BYSx3mIfk/TYsf-qUn0tI/AAAAAAAABFw/Wz4pRATAORo/SNAGHTML14e57a7_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML14e57a7" width="244" /></a></blockquote>6. 再度回到［Connection control］活頁籤時，可在［Connection control］的清單中，看到IP Address為127.0.0.1的網址，為允許(Allow)的設定項目。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsf_ZUlikI/AAAAAAAABF0/ZZ11Ms8g9PU/s1600-h/SNAGHTML1521aa8%5B3%5D.png"><img alt="SNAGHTML1521aa8" border="0" height="244" src="http://lh4.ggpht.com/_40BYSx3mIfk/TYsgAeS3kqI/AAAAAAAABF4/b-mLHEiABH0/SNAGHTML1521aa8_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML1521aa8" width="190" /></a></blockquote>7. 按［確定］鈕，儲存設定值，並關閉［Mercury SMTP Server］對話方塊。<br /><ol></ol><h3>設定MercuryE SMTP Client</h3>1. 自［Configuration］功能表，選擇［ＭercuryE SMTP Client］指令。<br />2. 出現［MercuryE End-to-end SMTP Client Configuration］對話方塊。<br />3. 在［Name servers］欄位，輸入＂168.95.1.1＂。<br /><blockquote><a href="http://lh5.ggpht.com/_40BYSx3mIfk/TYsgA9LagAI/AAAAAAAABF8/bol4e691rg4/s1600-h/SNAGHTML155dc51%5B3%5D.png"><img alt="SNAGHTML155dc51" border="0" height="244" src="http://lh4.ggpht.com/_40BYSx3mIfk/TYsgBotan6I/AAAAAAAABGA/6q5-B8UAsC0/SNAGHTML155dc51_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML155dc51" width="206" /></a></blockquote>4. 按［Save］鈕，儲存設定值，並關閉［MercuryE End-to-end SMTP Client Configuration］對話方塊。<br /><h3>設定PHP.INI</h3>1. 使用您喜愛的文字處理器(Editor) ，打開路徑應在“C:\xampp\php” 的 “PHP.INI”檔案。<br />2. 加入 “sendmail_from = <a href="mailto:postmaster@localhost">postmaster@localhost</a>” 設定。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsjinAU2ZI/AAAAAAAABGc/uXkSgKr_xWA/s1600-h/SNAGHTML16b095a%5B3%5D.png"><img alt="SNAGHTML16b095a" border="0" height="103" src="http://lh4.ggpht.com/_40BYSx3mIfk/TYsjjKHEsKI/AAAAAAAABGg/_UiQvfkLBcs/SNAGHTML16b095a_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML16b095a" width="244" /></a></blockquote>3. 儲存並關閉這個檔案。<br /><h3>重新啟動Ｍercury與Apache</h3>1. 切換到［XAMPP Control Panel Application］視窗。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsgCScZemI/AAAAAAAABGE/V7GbZhrmg9Y/s1600-h/SNAGHTML15ae278%5B3%5D.png"><img alt="SNAGHTML15ae278" border="0" height="196" src="http://lh5.ggpht.com/_40BYSx3mIfk/TYsgCzgORdI/AAAAAAAABGI/xx_PqNjEN0A/SNAGHTML15ae278_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML15ae278" width="244" /></a></blockquote>2. 按 Ｍercury 右邊的［Stop］鈕，結束 Mercury 的功能（等於關閉SMTP Server的功能）。<br /><blockquote><a href="http://lh3.ggpht.com/_40BYSx3mIfk/TYsgDg6lZkI/AAAAAAAABGM/XkP50MyU5yo/s1600-h/SNAGHTML15cba40%5B3%5D.png"><img alt="SNAGHTML15cba40" border="0" height="196" src="http://lh6.ggpht.com/_40BYSx3mIfk/TYsgEfRZ7OI/AAAAAAAABGQ/lnKhY0QGEVo/SNAGHTML15cba40_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML15cba40" width="244" /></a></blockquote>3.&nbsp; 如法泡製，按 Apache 右邊的［Stop］鈕，結束 Appache 的功能（等於關閉Web Server的功能）。<br />4. 按 Apache 右邊的［Start］鈕，再次啟動 Apache 的功能（等於重新啟動Web Server的功能）。<br />5. 按 Ｍercury 右邊的［Start］鈕，再次啟動 Mercury 的功能（等於重新啟動SMTP Server的功能，執行這個重新啟動的程序，為的是要讓剛才的設定能正常運作）。<br /><blockquote><a href="http://lh6.ggpht.com/_40BYSx3mIfk/TYsgFNBabBI/AAAAAAAABGU/04jiP72Cnh8/s1600-h/SNAGHTML16069ff%5B3%5D.png"><img alt="SNAGHTML16069ff" border="0" height="196" src="http://lh6.ggpht.com/_40BYSx3mIfk/TYsgFqBg0VI/AAAAAAAABGY/f6nmwsxfeLc/SNAGHTML16069ff_thumb.png?imgmax=800" style="background-image: none; border-bottom: 0px; border-left: 0px; border-right: 0px; border-top: 0px; display: inline; padding-left: 0px; padding-right: 0px; padding-top: 0px;" title="SNAGHTML16069ff" width="244" /></a></blockquote>